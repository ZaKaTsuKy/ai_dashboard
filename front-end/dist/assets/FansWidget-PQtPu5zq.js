import{p as u,u as p,j as e,C as i,a as m,b as o,e as x,P as j}from"./index-CiW3by5p.js";import{F as c}from"./fan-DM6FyRsU.js";function f(s){return s===0?{label:"Stopped",color:"text-red-500"}:s<500?{label:"Low",color:"text-yellow-500"}:s<2e3?{label:"Normal",color:"text-green-500"}:s<3500?{label:"High",color:"text-orange-500"}:{label:"Max",color:"text-red-500"}}function g(s,a=5e3){return Math.min(s/a*100,100)}const N=({fan:s,maxRpm:a=5e3})=>{const r=f(s.rpm),n=g(s.rpm,a),l=s.rpm>0?Math.max(.1,60/s.rpm):0;return e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-secondary/30 transition-all hover:bg-secondary/50",children:[e.jsx("div",{className:"relative w-8 h-8 flex items-center justify-center",children:e.jsx(c,{className:`w-6 h-6 ${s.rpm>0?"text-blue-500":"text-gray-400"}`,style:{animation:s.rpm>0?`spin ${l}s linear infinite`:"none"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm truncate",children:s.label}),e.jsx("span",{className:`text-xs font-semibold ${r.color}`,children:r.label})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex-1",children:e.jsx(j,{value:n,variant:s.rpm===0?"danger":s.rpm>3e3?"warning":"success"})}),e.jsxs("span",{className:"text-xs font-mono text-muted-foreground w-16 text-right",children:[s.rpm," RPM"]})]})]})]})},v=u.memo(()=>{const a=p(t=>t.liveData)?.full_sensors;if(!a||!a.fans||a.fans.length===0)return e.jsxs(i,{className:"h-full",children:[e.jsx(m,{className:"pb-2",children:e.jsxs(o,{className:"flex items-center gap-2 text-sm",children:[e.jsx(c,{className:"w-4 h-4 text-blue-500"}),"System Fans"]})}),e.jsx(x,{children:e.jsx("div",{className:"text-muted-foreground text-sm",children:"No fans detected"})})]});const r=a.fans,n=Math.max(...r.map(t=>t.rpm),3e3),l=r.filter(t=>t.rpm>0).length,d=r.length;return e.jsxs(i,{className:"h-full",children:[e.jsx(m,{className:"pb-2",children:e.jsxs(o,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"w-4 h-4 text-blue-500"}),"System Fans"]}),e.jsxs("span",{className:"text-xs text-muted-foreground font-normal",children:[l,"/",d," active"]})]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.map((t,h)=>e.jsx(N,{fan:t,maxRpm:n},`fan-${h}-${t.chip}-${t.index}`))})})]})});v.displayName="FansWidget";export{v as FansWidget};
