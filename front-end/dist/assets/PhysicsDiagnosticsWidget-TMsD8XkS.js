import{g as n,p as g,u as f,j as e,C as r,a as i,b as c,A as l,e as x,B as j,c as a,T as N,P as y,n as _,v,Z as b,w}from"./index-CiW3by5p.js";import{F as k}from"./fan-DM6FyRsU.js";const C=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],T=n("gauge",C);const D=[["path",{d:"M5 12h14",key:"1ays0h"}]],M=n("minus",D);const F=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],P=n("trending-down",F),I=g.memo(()=>{const t=f(s=>s.liveData)?.physics_diagnostics;if(!t)return e.jsxs(r,{className:"h-full bg-white/5 backdrop-blur-md border-white/10",children:[e.jsx(i,{className:"pb-2",children:e.jsxs(c,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(l,{className:"w-4 h-4 text-cyan-400"}),"Physics Diagnostics"]})}),e.jsx(x,{className:"flex items-center justify-center h-32 text-muted-foreground text-xs",children:"Waiting for physics engine data..."})]});const d=s=>!isFinite(s)||s>86400?"∞":s<60?`${Math.round(s)}s`:s<3600?`${Math.round(s/60)}m`:`${(s/3600).toFixed(1)}h`,o=s=>s>=90?"success":s>=75?"warning":"danger",m=s=>{switch(s.toUpperCase()){case"IDLE":return"text-gray-400";case"COMPUTE":return"text-blue-400";case"GAMING":return"text-purple-400";case"IO_INTENSIVE":return"text-orange-400";case"MIXED":return"text-cyan-400";default:return"text-gray-400"}},h=s=>s==="None"?"text-green-400":s==="CPU"||s==="GPU"?"text-red-400":"text-yellow-400",u=()=>t.temp_derivative>.5?e.jsx(w,{className:"w-3 h-3 text-red-400"}):t.temp_derivative<-.5?e.jsx(P,{className:"w-3 h-3 text-green-400"}):e.jsx(M,{className:"w-3 h-3 text-gray-400"});return e.jsxs(r,{className:"h-full bg-white/5 backdrop-blur-md border-white/10 overflow-hidden",children:[e.jsx(i,{className:"pb-2",children:e.jsxs(c,{className:"text-sm font-medium flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-4 h-4 text-cyan-400"}),"Physics Diagnostics"]}),e.jsx(j,{variant:"outline",className:a("text-[10px] font-mono",m(t.workload_state)),children:t.workload_state})]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(N,{className:"w-3 h-3"}),"Thermal Efficiency"]}),e.jsxs("span",{className:a("font-mono",t.thermal_efficiency_pct>=90?"text-green-400":t.thermal_efficiency_pct>=75?"text-yellow-400":"text-red-400"),children:[t.thermal_efficiency_pct.toFixed(0),"%"]})]}),e.jsx(y,{value:Math.min(100,Math.max(0,t.thermal_efficiency_pct)),variant:o(t.thermal_efficiency_pct)}),t.thermal_degradation&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-orange-400 mt-1",children:[e.jsx(_,{className:"w-3 h-3"}),"Cooling degradation detected"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(v,{className:"w-3 h-3"}),"Time to Throttle"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u(),e.jsx("span",{className:a("font-mono text-sm",t.throttle_imminent?"text-red-400 animate-pulse":"text-green-400"),children:d(t.time_to_throttle_sec)}),t.is_transient_spike&&e.jsx("span",{className:"text-[10px] text-blue-400",children:"(transient)"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted-foreground",children:[e.jsxs("span",{children:["Warn: ",t.temp_warning,"°C"]}),e.jsxs("span",{children:["Crit: ",t.temp_critical,"°C"]})]}),t.fan_hunting&&e.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-md p-2 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-yellow-400 animate-spin",style:{animationDuration:"2s"}}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-yellow-300 font-medium",children:"Fan hunting detected"}),e.jsxs("span",{className:"text-yellow-200/70 ml-2",children:["(σ²: ",t.rpm_variance.toFixed(0)," RPM²)"]})]})]}),(t.vcore_unstable||t.rail_12v_unstable)&&e.jsxs("div",{className:"bg-orange-500/20 border border-orange-500/30 rounded-md p-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{className:"text-xs text-orange-300 font-medium",children:"Power Quality Issues"})]}),t.vcore_unstable&&e.jsxs("div",{className:"text-[10px] text-orange-200/80 pl-6",children:["Vcore unstable (±",t.vcore_variance_mv.toFixed(1),"mV)"]}),t.rail_12v_unstable&&e.jsx("div",{className:"text-[10px] text-orange-200/80 pl-6",children:"12V rail unstable"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(T,{className:"w-3 h-3"}),"Bottleneck"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("font-medium text-sm",h(t.bottleneck)),children:t.bottleneck==="None"?"No bottleneck":t.bottleneck}),t.bottleneck_severity>0&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",(t.bottleneck_severity*100).toFixed(0),"%)"]})]})]}),t.diagnostics.length>0&&e.jsxs("div",{className:"border-t border-white/10 pt-3 mt-3",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider mb-2",children:"Diagnostics"}),e.jsx("ul",{className:"space-y-1",children:t.diagnostics.map((s,p)=>e.jsxs("li",{className:"text-xs text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-cyan-400",children:"•"}),s]},p))})]}),t.rth_baseline>0&&e.jsxs("div",{className:"text-[10px] text-muted-foreground/50 font-mono",children:["Rth: ",t.rth_instant.toFixed(4)," (baseline: ",t.rth_baseline.toFixed(4),")"]})]})]})});I.displayName="PhysicsDiagnosticsWidget";export{I as PhysicsDiagnosticsWidget,I as default};
